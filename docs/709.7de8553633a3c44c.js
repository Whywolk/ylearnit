"use strict";(self.webpackChunkylearnit_angular=self.webpackChunkylearnit_angular||[]).push([[709],{1709:(Xt,L,r)=>{r.r(L),r.d(L,{StudyModule:()=>C});var a=r(6895),D=r(529),c=r(433),p=r(7747),d=r(4166),t=r(1571),J=r(3743);class T{constructor(e,n){this.authService=e,this.router=n}canActivate(e,n){return!!this.authService.isAuth()||this.router.createUrlTree(["/login"])}canActivateChild(e,n){return!!this.authService.isAuth()||this.router.createUrlTree(["/login"])}}T.\u0275fac=function(e){return new(e||T)(t.LFG(J.e),t.LFG(d.F0))},T.\u0275prov=t.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"});var Q=r(7024);class _{constructor(e,n){this.appConfig=e,this.http=n,this.studyUrl="/study"}getCourseById(e){return this.http.get(`${this.getApiUrl()}/course/${e}`)}getCoursesByTargetLang(e){return this.http.get(`${this.getApiUrl()}/courses`,{params:{targetLang:e,sourceLang:"ru"}})}addCourse(e){return this.http.post(`${this.getApiUrl()}/course/${e}`,{})}getLearningCourseById(e){return this.http.get(`${this.getApiUrl()}/lcourse/${e}`)}getLearningCoursesByTargetLang(e){return this.http.get(`${this.getApiUrl()}/lcourses/${e}`)}addTopicForLearningCourse(e,n){return this.http.post(`${this.getApiUrl()}/lcourse/${e}/${n}`,{})}getStudyTests(e,n,s="SM2"){let i=`${this.getApiUrl()}/tests`;return this.http.get(i,{params:{targetLang:e,sourceLang:n,testType:s}})}getStudyTestsByTopics(e,n,s,i="SM2"){let o=`${this.getApiUrl()}/tests`;return this.http.get(o,{params:{targetLang:e,sourceLang:n,ltIds:s,testType:i}})}endStudyTests(e){return this.http.post(`${this.getApiUrl()}/tests`,e)}getStatsByIds(e){return this.http.get(`${this.getApiUrl()}/stats`,{params:{leIds:e,sourceLang:"ru"}})}getStatsByLearningTopic(e,n=0){return this.http.get(`${this.getApiUrl()}/stats/byLearningTopic/${e}`,{params:{page:n}})}getApiUrl(){return this.appConfig.apiUrl+this.studyUrl}}_.\u0275fac=function(e){return new(e||_)(t.LFG(Q._),t.LFG(D.eN))},_.\u0275prov=t.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"});var N=r(8505);class g{constructor(e){this.studyService=e,this._tests=[],this._answers=[],this._curTest=0,this._lTopicIds=[],this._testType="SM2"}getStudyTests(){if(this._targetLang&&this._sourceLang)return 0==this._lTopicIds.length?this.studyService.getStudyTests(this._targetLang,this._sourceLang,this._testType).pipe((0,N.b)(e=>{this._tests=e,this._answers=[],this._curTest=0,console.debug(e)})):this.studyService.getStudyTestsByTopics(this._targetLang,this._sourceLang,this._lTopicIds,this._testType).pipe((0,N.b)(e=>{this._tests=e,this._answers=[],this._curTest=0,console.debug(e)}));throw new Error("Target lang or source lang not setted")}endStudyTests(){return this.studyService.endStudyTests(this._answers)}onReviewByCourse(e){let n=[];for(let s of e.topics)s.added&&n.push(s.lTopicId);this.learningTopicIds=n,this.targetLang=e.targetLang,this.sourceLang=e.sourceLang}onReviewByTopic(e,n){this.learningTopicIds=[n.lTopicId],this.targetLang=e.targetLang,this.sourceLang=e.sourceLang}getTestCount(){return this._tests.length}getTest(e){return this._tests[e]}get tests(){return this._tests}getNextTest(){return this._curTest+1<this._tests.length&&(this._curTest+=1),this._tests[this._curTest]}addAnswer(e){this._answers.push(e)}get answers(){return this._answers}get learningTopicIds(){return this._lTopicIds}set learningTopicIds(e){this._lTopicIds=e}get targetLang(){return this._targetLang}set targetLang(e){this._targetLang=e}get sourceLang(){return this._sourceLang}set sourceLang(e){this._sourceLang=e}get type(){return this._testType}set type(e){this._testType=e}clear(){this._tests=[],this._answers=[],this._lTopicIds=[],this._curTest=0,this._testType="SM2"}}function O(u,e){1&u&&(t.TgZ(0,"button",8),t._uU(1,"\u0418\u0437\u0443\u0447\u0430\u0435\u0442\u0441\u044f"),t.qZA())}function R(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.addCourse())}),t._uU(1,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),t.qZA()}if(2&u){const n=t.oxw(2);t.Q6J("disabled",n.isDisabledButtons)}}function $(u,e){1&u&&(t.TgZ(0,"span",13),t._uU(1,"\u0438\u0437\u0443\u0447\u0430\u0435\u0442\u0441\u044f"),t.qZA())}function j(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"div")(1,"button",14),t._uU(2," \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 "),t.qZA(),t.TgZ(3,"button",15),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.onReviewByTopic(o.course,i))}),t._uU(4," \u041f\u0440\u043e\u0439\u0442\u0438 \u0442\u0435\u0441\u0442 "),t.qZA()()}if(2&u){const n=t.oxw().$implicit;t.xp6(1),t.MGl("routerLink","/app/stats/ltopic/",n.lTopicId,"")}}function G(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"div")(1,"button",16),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.addTopic(i))}),t._uU(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),t.qZA()()}if(2&u){const n=t.oxw(3);t.xp6(1),t.Q6J("disabled",n.isDisabledButtons)}}function H(u,e){if(1&u&&(t.TgZ(0,"div",1)(1,"div",10)(2,"div",11)(3,"h5"),t._uU(4),t.YNc(5,$,2,0,"span",12),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA(),t.YNc(10,j,5,1,"div",0),t.YNc(11,G,3,1,"div",0),t.qZA()()()),2&u){const n=e.$implicit,s=t.oxw(2);t.xp6(4),t.hij("\u0422\u0435\u043c\u0430: ",n.title," "),t.xp6(1),t.Q6J("ngIf",n.added),t.xp6(2),t.hij("\u0421\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c: ",n.difficult,""),t.xp6(2),t.Oqu(n.description),t.xp6(1),t.Q6J("ngIf",n.added),t.xp6(1),t.Q6J("ngIf",s.course.added&&!n.added)}}function K(u,e){if(1&u&&(t.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),t._uU(5),t.TgZ(6,"span",4),t._uU(7),t.qZA()()(),t.YNc(8,O,2,0,"button",5),t.YNc(9,R,2,1,"button",6),t.qZA(),t.TgZ(10,"div")(11,"p"),t._uU(12,"\u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u044f\u0437\u044b\u043a: "),t.TgZ(13,"span",4),t._uU(14),t.qZA()(),t.TgZ(15,"p"),t._uU(16),t.qZA(),t.TgZ(17,"p"),t._uU(18),t.qZA()()(),t.YNc(19,H,12,6,"div",7),t.qZA()),2&u){const n=t.oxw();t.xp6(5),t.hij("",n.course.title," "),t.xp6(2),t.Oqu(n.course.targetLang),t.xp6(1),t.Q6J("ngIf",n.course.added),t.xp6(1),t.Q6J("ngIf",!n.course.added),t.xp6(5),t.Oqu(n.course.sourceLang),t.xp6(2),t.hij("\u0421\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c: ",n.course.difficult,""),t.xp6(2),t.Oqu(n.course.description),t.xp6(1),t.Q6J("ngForOf",n.course.topics)}}g.\u0275fac=function(e){return new(e||g)(t.LFG(_))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"});class w{constructor(e,n,s,i){this.studyService=e,this.reviewService=n,this.route=s,this.router=i,this.isDisabledButtons=!1}ngOnInit(){this.getCourse(this.route.snapshot.params.id)}getCourse(e){this.studyService.getCourseById(e).subscribe({next:n=>{this.course=n,console.log(n)},error:n=>{console.error(n)}})}addCourse(){this.course&&(this.isDisabledButtons=!0,this.studyService.addCourse(this.course.id).subscribe({next:e=>{this.ngOnInit(),this.isDisabledButtons=!1},error:e=>{console.log(e)}}))}addTopic(e){this.course&&e&&(this.isDisabledButtons=!0,this.studyService.addTopicForLearningCourse(this.course.lCourseId,e.id).subscribe({next:n=>{this.ngOnInit(),this.isDisabledButtons=!1},error:n=>{console.log(n)}}))}onReviewByCourse(e){e.added&&(this.reviewService.onReviewByCourse(e),console.debug("by course="+e.lCourseId),this.router.navigate(["/app/test"]))}onReviewByTopic(e,n){e.added&&n.added&&(this.reviewService.onReviewByTopic(e,n),console.debug("by topic="+n.lTopicId),this.router.navigate(["/app/test"]))}}w.\u0275fac=function(e){return new(e||w)(t.Y36(_),t.Y36(g),t.Y36(d.gz),t.Y36(d.F0))},w.\u0275cmp=t.Xpm({type:w,selectors:[["study-course-details"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"m-2"],[1,"row"],[1,"col-auto"],[1,"badge","bg-secondary"],["class","col-3 btn btn-info disabled",4,"ngIf"],["class","col-3 btn btn-info",3,"disabled","click",4,"ngIf"],["class","m-2",4,"ngFor","ngForOf"],[1,"col-3","btn","btn-info","disabled"],[1,"col-3","btn","btn-info",3,"disabled","click"],[1,"card"],[1,"card-body"],["class","badge bg-info",4,"ngIf"],[1,"badge","bg-info"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"btn","btn-info",3,"disabled","click"]],template:function(e,n){1&e&&t.YNc(0,K,20,8,"div",0),2&e&&t.Q6J("ngIf",n.course)},dependencies:[a.sg,a.O5,d.rH]});var B=r(7579),W=r(1566),X=r(4482),P=r(5403),V=r(1884),tt=r(9300),et=r(6451),nt=r(4004);const ut=["instance"];function st(u,e){if(1&u&&(t.TgZ(0,"a",12),t._uU(1,"learning"),t.qZA()),2&u){const n=t.oxw().$implicit;t.MGl("routerLink","../course/",n.id,"")}}function it(u,e){if(1&u&&(t.TgZ(0,"div",7)(1,"div",8)(2,"a",9),t._uU(3),t.qZA(),t.YNc(4,st,2,1,"a",10),t.qZA(),t.TgZ(5,"div",11)(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()()()),2&u){const n=e.$implicit;t.xp6(2),t.MGl("routerLink","../course/",n.id,""),t.xp6(1),t.Oqu(n.title),t.xp6(1),t.Q6J("ngIf",n.added),t.xp6(3),t.hij("\u0412\u0441\u0435\u0433\u043e \u0442\u0435\u043c: ",n.topics.length,""),t.xp6(2),t.hij("\u0421\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c: ",n.difficult,"")}}const k=[{code:"en",name:"English"},{code:"ru",name:"Russian"}];class A{constructor(e){this.studyService=e,this.formatter=n=>n.name,this.focus$=new B.x,this.click$=new B.x,this.search=n=>{const s=n.pipe(function z(u,e=W.z){return(0,X.e)((n,s)=>{let i=null,o=null,l=null;const Z=()=>{if(i){i.unsubscribe(),i=null;const h=o;o=null,s.next(h)}};function F(){const h=l+u,I=e.now();if(I<h)return i=this.schedule(void 0,h-I),void s.add(i);Z()}n.subscribe((0,P.x)(s,h=>{o=h,l=e.now(),i||(i=e.schedule(F,u),s.add(i))},()=>{Z(),s.complete()},void 0,()=>{o=i=null}))})}(200),(0,V.x)()),i=this.click$.pipe((0,tt.h)(()=>!this.instance.isPopupOpen()));return(0,et.T)(s,this.focus$,i).pipe((0,nt.U)(l=>""===l?k:k.filter(Z=>new RegExp(l,"mi").test(Z.name)).slice(0,10)))}}ngOnInit(){}getCourses(){this.langField&&this.studyService.getCoursesByTargetLang(this.langField.code).subscribe({next:e=>{this.courses=e,console.debug(e)},error:e=>{console.error(e)}})}}function ot(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"a",5),t._uU(3),t.qZA()(),t.TgZ(4,"div",6)(5,"button",7),t.NdJ("click",function(){const o=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onReviewByCourse(o))}),t._uU(6,"\u041f\u0440\u043e\u0439\u0442\u0438 \u0442\u0435\u0441\u0442"),t.qZA()()()}if(2&u){const n=e.$implicit,s=e.index;t.xp6(2),t.MGl("routerLink","./course/",n.id,""),t.xp6(1),t.AsE(" ",s+1,") ",n.title," ")}}function rt(u,e){if(1&u&&(t.TgZ(0,"div"),t.YNc(1,ot,7,3,"div",2),t.qZA()),2&u){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.learningCourses)}}function ct(u,e){1&u&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"\u041a\u0443\u0440\u0441\u044b \u043d\u0435 "),t.TgZ(3,"a",8),t._uU(4,"\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b"),t.qZA()()())}A.\u0275fac=function(e){return new(e||A)(t.Y36(_))},A.\u0275cmp=t.Xpm({type:A,selectors:[["study-courses-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(ut,7),2&e){let s;t.iGM(s=t.CRH())&&(n.instance=s.first)}},decls:16,vars:7,consts:[[1,"mt-3"],[1,"row"],[1,"col-auto"],["type","text",1,"form-control",3,"ngModel","ngbTypeahead","editable","inputFormatter","resultFormatter","ngModelChange","focus","click"],["instance","ngbTypeahead"],[1,"btn","btn-info",3,"disabled","click"],["class","card my-3",4,"ngFor","ngForOf"],[1,"card","my-3"],[1,"card-header"],[1,"card-title","link-info","h5",3,"routerLink"],["class","btn badge bg-info ms-3",3,"routerLink",4,"ngIf"],[1,"card-body","justify-content-between"],[1,"btn","badge","bg-info","ms-3",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"\u041a\u0443\u0440\u0441\u044b"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",1)(5,"div",2)(6,"label"),t._uU(7,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u044f\u0437\u044b\u043a:"),t.qZA()(),t.TgZ(8,"div",2)(9,"input",3,4),t.NdJ("ngModelChange",function(i){return n.langField=i})("focus",function(i){return n.focus$.next(i.target.value)})("click",function(i){return n.click$.next(i.target.value)}),t.qZA()(),t.TgZ(11,"div",2)(12,"button",5),t.NdJ("click",function(){return n.getCourses()}),t._uU(13,"\u041d\u0430\u0439\u0442\u0438"),t.qZA()()(),t._UZ(14,"hr"),t.YNc(15,it,10,5,"div",6),t.qZA()),2&e&&(t.xp6(9),t.Q6J("ngModel",n.langField)("ngbTypeahead",n.search)("editable",!1)("inputFormatter",n.formatter)("resultFormatter",n.formatter),t.xp6(3),t.Q6J("disabled",!(null!=n.langField&&n.langField.code)),t.xp6(3),t.Q6J("ngForOf",n.courses))},dependencies:[a.sg,a.O5,d.rH,p.dR,c.Fj,c.JJ,c.On]});class y{constructor(e,n,s){this.studyService=e,this.reviewService=n,this.router=s}ngOnInit(){this.studyService.getLearningCoursesByTargetLang("en").subscribe({next:e=>{this.learningCourses=e,console.debug(e)},error:e=>{console.error(e)}})}onReviewByCourse(e){e.added&&(this.reviewService.onReviewByCourse(e),console.debug("by course="+e.id),this.router.navigate(["/app/test"]))}}y.\u0275fac=function(e){return new(e||y)(t.Y36(_),t.Y36(g),t.Y36(d.F0))},y.\u0275cmp=t.Xpm({type:y,selectors:[["study-dashboard"]],decls:5,vars:2,consts:[[1,"mt-3"],[4,"ngIf"],["class","card my-3",4,"ngFor","ngForOf"],[1,"card","my-3"],[1,"card-header"],[1,"link","link-info","h5",3,"routerLink"],[1,"card-body"],[1,"btn","btn-primary",3,"click"],["routerLink","./courses"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u043a\u0443\u0440\u0441\u044b"),t.qZA(),t.YNc(3,rt,2,1,"div",1),t.YNc(4,ct,5,0,"div",1),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",n.learningCourses),t.xp6(1),t.Q6J("ngIf",0==(null==n.learningCourses?null:n.learningCourses.length)))},dependencies:[a.sg,a.O5,d.rH]});class x{constructor(e,n){this.authService=e,this.router=n,this.isMenuCollapsed=!0,this.username=localStorage.getItem("userName")}onLogOut(){console.log("Log out"),this.authService.logout(),this.router.navigate(["/login"])}}function at(u,e){if(1&u&&(t.TgZ(0,"tr")(1,"th",6),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&u){const n=e.$implicit,s=e.index;t.xp6(2),t.Oqu(s+1),t.xp6(2),t.hij(" ",n.contentId," "),t.xp6(2),t.hij(" ",n.content," "),t.xp6(2),t.hij(" ",n.lang," "),t.xp6(2),t.hij(" ",n.sideType," "),t.xp6(2),t.hij(" ",n.contentType," ")}}function dt(u,e){if(1&u&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&u){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.answer.date," ")}}function lt(u,e){if(1&u&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&u){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.answer.accuracy," ")}}function pt(u,e){if(1&u&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&u){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.answer.retrievability," ")}}function _t(u,e){if(1&u&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&u){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.answer.idleSeconds," ")}}function gt(u,e){1&u&&(t.TgZ(0,"td"),t._uU(1," --- "),t.qZA())}function ht(u,e){1&u&&(t.TgZ(0,"td"),t._uU(1," --- "),t.qZA())}function Tt(u,e){1&u&&(t.TgZ(0,"td"),t._uU(1," --- "),t.qZA())}function mt(u,e){1&u&&(t.TgZ(0,"td"),t._uU(1," --- "),t.qZA())}function ft(u,e){if(1&u&&(t.TgZ(0,"tr")(1,"th",6),t._uU(2),t.qZA(),t.TgZ(3,"th",6),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.YNc(9,dt,2,1,"td",1),t.YNc(10,lt,2,1,"td",1),t.YNc(11,pt,2,1,"td",1),t.YNc(12,_t,2,1,"td",1),t.YNc(13,gt,2,0,"td",1),t.YNc(14,ht,2,0,"td",1),t.YNc(15,Tt,2,0,"td",1),t.YNc(16,mt,2,0,"td",1),t.qZA()),2&u){const n=e.$implicit;t.xp6(2),t.hij(" ",n.loop," "),t.xp6(2),t.hij(" ",n.serialNumber," "),t.xp6(2),t.hij(" ",n.interval," "),t.xp6(2),t.hij(" ",n.date," "),t.xp6(1),t.Q6J("ngIf",n.answer),t.xp6(1),t.Q6J("ngIf",n.answer),t.xp6(1),t.Q6J("ngIf",n.answer),t.xp6(1),t.Q6J("ngIf",n.answer),t.xp6(1),t.Q6J("ngIf",!n.answer),t.xp6(1),t.Q6J("ngIf",!n.answer),t.xp6(1),t.Q6J("ngIf",!n.answer),t.xp6(1),t.Q6J("ngIf",!n.answer)}}function vt(u,e){if(1&u&&(t.TgZ(0,"div")(1,"h4"),t._uU(2,"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430"),t.qZA(),t.TgZ(3,"div",2)(4,"table",3)(5,"thead")(6,"tr")(7,"th",4),t._uU(8,"#"),t.qZA(),t.TgZ(9,"th",4),t._uU(10,"CID"),t.qZA(),t.TgZ(11,"th",4),t._uU(12,"\u0421\u043b\u043e\u0432\u043e"),t.qZA(),t.TgZ(13,"th",4),t._uU(14,"\u042f\u0437\u044b\u043a"),t.qZA(),t.TgZ(15,"th",4),t._uU(16,"\u0422\u0438\u043f \u0441\u0442\u043e\u0440\u043e\u043d\u044b"),t.qZA(),t.TgZ(17,"th",4),t._uU(18,"\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,at,13,6,"tr",5),t.qZA()()(),t._UZ(21,"hr"),t.TgZ(22,"h4"),t._uU(23,"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f"),t.qZA(),t.TgZ(24,"div",2)(25,"table",3)(26,"thead")(27,"tr")(28,"th",4),t._uU(29,"\u041a\u0440\u0443\u0433"),t.qZA(),t.TgZ(30,"th",4),t._uU(31,"\u041d\u043e\u043c\u0435\u0440"),t.qZA(),t.TgZ(32,"th",4),t._uU(33,"\u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b"),t.qZA(),t.TgZ(34,"th",4),t._uU(35,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0432\u0442\u043e\u0440\u0430"),t.qZA(),t.TgZ(36,"th",4),t._uU(37,"\u0414\u0430\u0442\u0430 \u043e\u0442\u0432\u0435\u0442\u0430"),t.qZA(),t.TgZ(38,"th",4),t._uU(39,"\u0422\u043e\u0447\u043d\u043e\u0441\u0442\u044c"),t.qZA(),t.TgZ(40,"th",4),t._uU(41,"R"),t.qZA(),t.TgZ(42,"th",4),t._uU(43,"\u0412\u0440\u0435\u043c\u044f (\u0441\u0435\u043a.)"),t.qZA()()(),t.TgZ(44,"tbody"),t.YNc(45,ft,17,12,"tr",5),t.qZA()()()()),2&u){const n=t.oxw();t.xp6(20),t.Q6J("ngForOf",n.learningCard.card.sides),t.xp6(25),t.Q6J("ngForOf",n.learningCard.learningElement.repetitions)}}x.\u0275fac=function(e){return new(e||x)(t.Y36(J.e),t.Y36(d.F0))},x.\u0275cmp=t.Xpm({type:x,selectors:[["study-home"]],decls:26,vars:2,consts:[[1,"d-flex","flex-column","bg-light","min-vh-100"],[1,"navbar","sticky-top","navbar-expand-md","navbar-dark","bg-dark"],[1,"container"],["routerLink","/app",1,"navbar-brand"],["type","button",1,"navbar-toggler",3,"click"],[1,"collapse","navbar-collapse","justify-content-between",3,"ngbCollapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","./courses",1,"nav-link",3,"click"],["routerLink","./test",1,"nav-link",3,"click"],["ngbDropdown","",1,"nav-item","mr-auto"],["type","button","ngbDropdownToggle","",1,"nav-link"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end","dropdown-menu-dark"],["ngbDropdownItem","",3,"click"],[1,"row","min-vh-100","justify-content-center"],[1,"col-lg-8","bg-white"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),t._uU(4,"YLearnIt!"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.isMenuCollapsed=!n.isMenuCollapsed}),t._uU(6," \u2630 "),t.qZA(),t.TgZ(7,"div",5)(8,"ul",6)(9,"li",7)(10,"a",8),t.NdJ("click",function(){return n.isMenuCollapsed=!0}),t._uU(11,"\u041a\u0443\u0440\u0441\u044b"),t.qZA()(),t.TgZ(12,"li",7)(13,"a",9),t.NdJ("click",function(){return n.isMenuCollapsed=!0}),t._uU(14,"\u0422\u0435\u0441\u0442\u044b"),t.qZA()()(),t.TgZ(15,"ul",6)(16,"li",10)(17,"a",11),t._uU(18),t.qZA(),t.TgZ(19,"div",12)(20,"button",13),t.NdJ("click",function(){return n.onLogOut()}),t._uU(21,"\u0412\u044b\u0439\u0442\u0438"),t.qZA()()()()()()(),t.TgZ(22,"div",2)(23,"div",14)(24,"div",15),t._UZ(25,"router-outlet"),t.qZA()()()()),2&e&&(t.xp6(7),t.Q6J("ngbCollapse",n.isMenuCollapsed),t.xp6(11),t.Oqu(n.username))},dependencies:[d.lC,d.rH,p._D,p.jt,p.iD,p.Vi,p.TH,p.M2]});class b{constructor(e,n,s){this.studyService=e,this.route=n,this.router=s}ngOnInit(){this.leId=this.route.snapshot.params.lElementId,this.leId&&this.studyService.getStatsByIds([this.leId]).subscribe({next:e=>{e.length>0&&(this.learningCard=e[0],console.debug(e))},error:e=>{console.error(e)}})}}function Ct(u,e){if(1&u&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&u){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.learningElement.lastRep.answer.accuracy," ")}}function Zt(u,e){1&u&&(t.TgZ(0,"td"),t._uU(1," --- "),t.qZA())}function wt(u,e){if(1&u&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&u){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.learningElement.lastRep.answer.retrievability," ")}}function At(u,e){1&u&&(t.TgZ(0,"td"),t._uU(1," --- "),t.qZA())}function yt(u,e){if(1&u&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&u){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.learningElement.lastRep.answer.date," ")}}function xt(u,e){1&u&&(t.TgZ(0,"td"),t._uU(1," --- "),t.qZA())}function bt(u,e){if(1&u&&(t.TgZ(0,"tr")(1,"th",6),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"a",7),t._uU(5),t.qZA()(),t.YNc(6,Ct,2,1,"td",8),t.YNc(7,Zt,2,0,"td",8),t.YNc(8,wt,2,1,"td",8),t.YNc(9,At,2,0,"td",8),t.YNc(10,yt,2,1,"td",8),t.YNc(11,xt,2,0,"td",8),t.TgZ(12,"td"),t._uU(13),t.qZA()()),2&u){const n=e.$implicit,s=e.index,i=t.oxw();t.xp6(2),t.Oqu(s+1),t.xp6(2),t.MGl("routerLink","../../lelement/",n.learningElement.id,""),t.xp6(1),t.hij(" ",i.getContent(n.card,n.learningElement.element.targetLang)," "),t.xp6(1),t.Q6J("ngIf",n.learningElement.lastRep),t.xp6(1),t.Q6J("ngIf",!n.learningElement.lastRep),t.xp6(1),t.Q6J("ngIf",n.learningElement.lastRep),t.xp6(1),t.Q6J("ngIf",!n.learningElement.lastRep),t.xp6(1),t.Q6J("ngIf",n.learningElement.lastRep),t.xp6(1),t.Q6J("ngIf",!n.learningElement.lastRep),t.xp6(2),t.Oqu(n.learningElement.nextRep.date)}}function Ut(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"div",9)(1,"button",10),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.getNextPage())}),t._uU(2,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435"),t.qZA()()}}b.\u0275fac=function(e){return new(e||b)(t.Y36(_),t.Y36(d.gz),t.Y36(d.F0))},b.\u0275cmp=t.Xpm({type:b,selectors:[["study-learning-card-details"]],decls:5,vars:1,consts:[[1,"mt-3"],[4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0438\u0437\u0443\u0447\u0430\u0435\u043c\u043e\u043c\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0443"),t.qZA(),t._UZ(3,"hr"),t.YNc(4,vt,46,2,"div",1),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",n.learningCard))},dependencies:[a.sg,a.O5]});class U{constructor(e,n,s){this.studyService=e,this.route=n,this.router=s,this.learningCards=[],this.page=0,this.hasPages=!0}ngOnInit(){this.lTopicId=this.route.snapshot.params.lTopicId,this.lTopicId&&this.getByPage(this.lTopicId,this.page)}getContent(e,n){for(let s of e.sides)if(s.lang===n)return s.content}getByPage(e,n){this.studyService.getStatsByLearningTopic(e,n).subscribe({next:s=>{s.length>0?(this.learningCards=this.learningCards.concat(s),this.page+=1,console.debug(s)):this.hasPages=!1},error:s=>{console.error(s)}})}getNextPage(){this.lTopicId&&this.page&&this.getByPage(this.lTopicId,this.page)}}U.\u0275fac=function(e){return new(e||U)(t.Y36(_),t.Y36(d.gz),t.Y36(d.F0))},U.\u0275cmp=t.Xpm({type:U,selectors:[["study-learning-card-list"]],decls:22,vars:2,consts:[[1,"mt-3"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["scope","row"],[1,"link","link-primary",3,"routerLink"],[4,"ngIf"],[1,"text-center"],[1,"btn","btn-primary","m-3",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0442\u0435\u043c\u0435"),t.qZA(),t.TgZ(3,"div",1)(4,"table",2)(5,"thead")(6,"tr")(7,"th",3),t._uU(8,"#"),t.qZA(),t.TgZ(9,"th",3),t._uU(10,"\u0421\u043b\u043e\u0432\u043e"),t.qZA(),t.TgZ(11,"th",3),t._uU(12,"\u0422\u043e\u0447\u043d\u043e\u0441\u0442\u044c"),t.qZA(),t.TgZ(13,"th",3),t._uU(14,"R"),t.qZA(),t.TgZ(15,"th",3),t._uU(16,"\u041f\u043e\u0441\u043b. \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0435"),t.qZA(),t.TgZ(17,"th",3),t._uU(18,"\u0421\u043b\u0435\u0434. \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0435"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,bt,14,10,"tr",4),t.qZA()()(),t.YNc(21,Ut,3,0,"div",5),t.qZA()),2&e&&(t.xp6(20),t.Q6J("ngForOf",n.learningCards),t.xp6(1),t.Q6J("ngIf",n.hasPages))},dependencies:[a.sg,a.O5,d.rH]});class M{constructor(e,n,s,i,o,l,Z,F,h,I){this.testAnswers=e,this.userAnswer=n,this.type=s,this.thinkingTime=i,this.totalTime=o,this.dbName=l,this.elementIdDb=Z,this.learningElementId=F,this.repetitionId=h,this.data=I}}class Y{constructor(e,n,s,i,o,l){this.contentId=e,this.content=n,this.contentType=s,this.lang=i,this.sideType=o,this.variants=l}}function St(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"div")(1,"p"),t._uU(2,"\u041e\u0442\u0432\u0435\u0442?"),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.showAnswer())}),t._uU(5,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043e\u0442\u0432\u0435\u0442"),t.qZA()()()}}function Et(u,e){if(1&u&&(t.TgZ(0,"h4",1),t._uU(1),t.qZA()),2&u){const n=e.$implicit;t.xp6(1),t.Oqu(n.content)}}function qt(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){const o=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onMark(o))}),t._uU(1),t.qZA()}if(2&u){const n=e.$implicit;t.xp6(1),t.hij(" ",n," ")}}function It(u,e){if(1&u&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"\u041e\u0442\u0432\u0435\u0442:"),t.qZA(),t.YNc(3,Et,2,1,"h4",3),t._UZ(4,"hr"),t.TgZ(5,"div")(6,"label"),t._uU(7,"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442:"),t.qZA(),t.TgZ(8,"div",4)(9,"button",5),t._uU(10,"?"),t.qZA(),t.TgZ(11,"div",6)(12,"label",7),t._uU(13,"5 \u2013 \u0438\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"),t.qZA(),t.TgZ(14,"label",7),t._uU(15,"4 \u2013 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442 \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f"),t.qZA(),t.TgZ(16,"label",7),t._uU(17,"3 \u2013 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u0441\u043f\u043e\u043c\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0432 \u0431\u043e\u043b\u044c\u0448\u0438\u043c \u0442\u0440\u0443\u0434\u043e\u043c"),t.qZA(),t.TgZ(18,"label",7),t._uU(19,"2 \u2013 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442, \u0433\u0434\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043a\u0430\u0437\u0430\u043b\u043e\u0441\u044c \u043b\u0435\u0433\u043a\u043e \u0432\u0441\u043f\u043e\u043c\u043d\u0438\u0442\u044c"),t.qZA(),t.TgZ(20,"label",7),t._uU(21,"1 \u2013 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442, \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0432\u0441\u043f\u043e\u043c\u043d\u0438\u043b"),t.qZA(),t.TgZ(22,"label",7),t._uU(23,"0 \u2013 \u043d\u0435\u0442 \u043e\u0442\u0432\u0435\u0442\u0430, \u043d\u0435 \u0437\u0430\u043f\u043e\u043c\u043d\u0438\u043b\u0441\u044f"),t.qZA()()()(),t.TgZ(24,"div",8),t.YNc(25,qt,2,1,"button",9),t.qZA()()),2&u){const n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.studyTest.answers),t.xp6(22),t.Q6J("ngForOf",n.sm2Marks)}}class m{constructor(){this.userAnswerEvent=new t.vpe,this.isShowAnswer=!1,this.sm2Marks=["0","1","2","3","4","5"]}ngOnInit(){this.start=new Date,this.isShowAnswer=!1,this.curMark=void 0,console.debug("Start="+this.start)}showAnswer(){this.isShowAnswer=!0,this.end=new Date,console.debug("End="+this.end),console.debug("Total=",this.end.getTime()-this.start.getTime())}onMark(e){this.curMark=e,this.onNext()}onNext(){if(this.curMark){let e=Math.round((this.end.getTime()-this.start.getTime())/1e3),s=this.buildUserAnswer(this.curMark,e,e);this.userAnswerEvent.emit(s)}}buildUserAnswer(e,n,s){let i=new Y(-1,e,"TEXT_PLAIN","en","USER_ANSWER",[]);return new M(this.studyTest.answers,i,"SM2",n,s,this.studyTest.dbName,this.studyTest.elementIdDb,this.studyTest.learningElementId,this.studyTest.repetitionId,"")}}m.\u0275fac=function(e){return new(e||m)},m.\u0275cmp=t.Xpm({type:m,selectors:[["study-sm2-test"]],inputs:{studyTest:"studyTest"},outputs:{userAnswerEvent:"userAnswerEvent"},decls:3,vars:2,consts:[[4,"ngIf"],[1,"text-center"],[1,"btn","btn-info",3,"click"],["class","text-center",4,"ngFor","ngForOf"],["ngbDropdown","",1,"my-4"],["ngbDropdownToggle","",1,"btn","btn-info"],["ngbDropdownMenu","",1,"dropdown-menu"],["ngbDropdownItem","",1,"text-wrap"],[1,"row"],["class","btn btn-outline-primary mx-2 col",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","mx-2","col",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.YNc(1,St,6,0,"div",0),t.YNc(2,It,26,2,"div",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!n.isShowAnswer),t.xp6(1),t.Q6J("ngIf",n.isShowAnswer))},dependencies:[a.sg,a.O5,p.jt,p.iD,p.Vi,p.TH]});class f{constructor(e){this.viewContainerRef=e}}function Ft(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"div")(1,"p"),t._uU(2,"\u041e\u0442\u0432\u0435\u0442?"),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onAnswerSubmit())}),t.TgZ(4,"div",2)(5,"div",3)(6,"input",4),t.NdJ("ngModelChange",function(i){t.CHM(n);const o=t.oxw();return t.KtG(o.onAnswerChange(i))}),t.qZA()(),t.TgZ(7,"div",5)(8,"button",6),t._uU(9,"\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c"),t.qZA()()()()()}if(2&u){const n=t.oxw();t.xp6(3),t.Q6J("formGroup",n.answer)}}function Lt(u,e){if(1&u&&(t.TgZ(0,"h4",7),t._uU(1),t.qZA()),2&u){const n=e.$implicit;t.xp6(1),t.Oqu(n.content)}}function Dt(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"div")(1,"p"),t._uU(2,"\u0412\u0430\u0448 \u043e\u0442\u0432\u0435\u0442:"),t.qZA(),t.TgZ(3,"h4",7),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6,"\u041e\u0442\u0432\u0435\u0442:"),t.qZA(),t.YNc(7,Lt,2,1,"h4",8),t.TgZ(8,"button",9),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onNext())}),t._uU(9,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442"),t.qZA()()}if(2&u){const n=t.oxw();t.xp6(4),t.Oqu(n.answer.controls.answer.value),t.xp6(3),t.Q6J("ngForOf",n.studyTest.answers)}}f.\u0275fac=function(e){return new(e||f)(t.Y36(t.s_b))},f.\u0275dir=t.lG2({type:f,selectors:[["","studyAnswerTest",""]]});class S{constructor(e){this.fb=e,this.WRITE_DELTA_MS=1e3,this.userAnswerEvent=new t.vpe,this.isShowAnswer=!1,this.changeTimestamps=[],this.answer=this.fb.group({answer:new c.NI("")})}ngOnInit(){this.isShowAnswer=!1,this.changeTimestamps.push(new Date)}onAnswerChange(e){this.changeTimestamps.push(new Date)}onAnswerSubmit(){this.changeTimestamps.push(new Date),this.isShowAnswer=!0}onNext(){let e=this.calcDeltaList(this.changeTimestamps),n=this.calcTotalTime(e),s=this.calcThinkingTime(e),i=this.buildUserAnswer(this.answer.controls.answer.value,s,n);this.userAnswerEvent.emit(i)}buildUserAnswer(e,n,s){let i=new Y(-1,e,"TEXT_PLAIN","en","USER_ANSWER",[]);return new M(this.studyTest.answers,i,"WRITE",n,s,this.studyTest.dbName,this.studyTest.elementIdDb,this.studyTest.learningElementId,this.studyTest.repetitionId,"")}calcDeltaList(e){let n=[];for(let s=0;s<e.length-1;s++){let i=e[s].getTime(),o=e[s+1].getTime();n.push(o-i)}return n}calcThinkingTime(e){let n=0;for(let s of e)s>this.WRITE_DELTA_MS&&(n+=s);return Math.round(n/1e3)}calcTotalTime(e){let n=0;for(let s of e)n+=s;return Math.round(n/1e3)}}function Jt(u,e){}S.\u0275fac=function(e){return new(e||S)(t.Y36(c.qu))},S.\u0275cmp=t.Xpm({type:S,selectors:[["study-write-test"]],inputs:{studyTest:"studyTest"},outputs:{userAnswerEvent:"userAnswerEvent"},decls:3,vars:2,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["type","text","formControlName","answer",1,"form-control",3,"ngModelChange"],[1,"col-4"],["type","submit",1,"btn","btn-primary"],[1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.YNc(1,Ft,10,1,"div",0),t.YNc(2,Dt,10,2,"div",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!n.isShowAnswer),t.xp6(1),t.Q6J("ngIf",n.isShowAnswer))},dependencies:[a.sg,a.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]});class E{constructor(){this.userAnswerEvent=new t.vpe}ngOnInit(){console.debug("study-test-component init"),this.loadTest()}loadTest(){let e;switch(this.studyTest.type){case"SM2":console.debug("sm2"),e=m;break;case"WRITE":console.debug("write"),e=S;break;default:console.debug("default - sm2"),e=m}let n=this.test.viewContainerRef;n.clear();let s=n.createComponent(e);s.instance.studyTest=this.studyTest,s.instance.userAnswerEvent.subscribe(i=>this.addAnswer(i))}addAnswer(e){console.debug("answer event"),this.userAnswerEvent.emit(e)}}function Nt(u,e){if(1&u&&(t.TgZ(0,"option",10),t._uU(1),t.qZA()),2&u){const n=e.$implicit;t.Q6J("ngValue",n),t.xp6(1),t.Oqu(n)}}function Bt(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"div")(1,"div",3)(2,"div",4)(3,"label"),t._uU(4,"\u0426\u0435\u043b\u0435\u0432\u043e\u0439 \u044f\u0437\u044b\u043a"),t.qZA(),t.TgZ(5,"input",5),t.NdJ("ngModelChange",function(i){t.CHM(n);const o=t.oxw();return t.KtG(o.reviewService.targetLang=i)}),t.qZA()(),t.TgZ(6,"div",4)(7,"label"),t._uU(8,"\u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u044f\u0437\u044b\u043a"),t.qZA(),t.TgZ(9,"input",5),t.NdJ("ngModelChange",function(i){t.CHM(n);const o=t.oxw();return t.KtG(o.reviewService.sourceLang=i)}),t.qZA()()(),t.TgZ(10,"div",3)(11,"div",6)(12,"label"),t._uU(13,"\u0422\u0438\u043f \u0442\u0435\u0441\u0442\u0430"),t.qZA()(),t.TgZ(14,"div",4)(15,"select",7),t.NdJ("ngModelChange",function(i){t.CHM(n);const o=t.oxw();return t.KtG(o.reviewService.type=i)}),t.YNc(16,Nt,2,2,"option",8),t.qZA()(),t.TgZ(17,"div",4)(18,"button",9),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.getStudyTests())}),t._uU(19,"\u041d\u0430\u0447\u0430\u0442\u044c"),t.qZA()()()()}if(2&u){const n=t.oxw();t.xp6(5),t.Q6J("ngModel",n.reviewService.targetLang),t.xp6(4),t.Q6J("ngModel",n.reviewService.sourceLang),t.xp6(6),t.Q6J("ngModel",n.reviewService.type),t.xp6(1),t.Q6J("ngForOf",n.testTypes)}}function kt(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"div",11)(1,"p",12),t._uU(2),t.qZA(),t.TgZ(3,"button",13),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onFinish())}),t._uU(4," \u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c "),t.qZA()()}if(2&u){const n=t.oxw();t.xp6(2),t.AsE("",n.curTestId+1," \u0438\u0437 ",n.reviewService.getTestCount(),"")}}function Mt(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"study-study-test",15),t.NdJ("userAnswerEvent",function(i){t.CHM(n);const o=t.oxw(2);return t.KtG(o.addUserAnswer(i))}),t.qZA()}if(2&u){const n=t.oxw(2);t.Q6J("studyTest",n.curTest)}}function Yt(u,e){if(1&u&&(t.TgZ(0,"div"),t.YNc(1,Mt,1,1,"study-study-test",14),t.qZA()),2&u){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isShowChild&&!n.isFinish)}}function Qt(u,e){if(1&u){const n=t.EpF();t.TgZ(0,"div")(1,"button",16),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.showResults())}),t._uU(2,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"),t.qZA()()}}function Ot(u,e){if(1&u&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&u){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.learningElement.lastRep.answer.accuracy," ")}}function Rt(u,e){if(1&u&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&u){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.learningElement.lastRep.answer.retrievability," ")}}function $t(u,e){1&u&&(t.TgZ(0,"td"),t._uU(1," --- "),t.qZA())}function jt(u,e){1&u&&(t.TgZ(0,"td"),t._uU(1," --- "),t.qZA())}function Gt(u,e){if(1&u&&(t.TgZ(0,"tr")(1,"th",21),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,Ot,2,1,"td",1),t.YNc(6,Rt,2,1,"td",1),t.YNc(7,$t,2,0,"td",1),t.YNc(8,jt,2,0,"td",1),t.TgZ(9,"td"),t._uU(10),t.qZA()()),2&u){const n=e.$implicit,s=e.index,i=t.oxw(3);t.xp6(2),t.Oqu(s+1),t.xp6(2),t.Oqu(i.getTargetLangContent(n.card)),t.xp6(1),t.Q6J("ngIf",n.learningElement.lastRep),t.xp6(1),t.Q6J("ngIf",n.learningElement.lastRep),t.xp6(1),t.Q6J("ngIf",!n.learningElement.lastRep),t.xp6(1),t.Q6J("ngIf",!n.learningElement.lastRep),t.xp6(2),t.Oqu(n.learningElement.nextRep.date)}}function Ht(u,e){if(1&u&&(t.TgZ(0,"div")(1,"div",17)(2,"table",18)(3,"thead")(4,"tr")(5,"th",19),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th",19),t._uU(8,"\u0421\u043b\u043e\u0432\u043e"),t.qZA(),t.TgZ(9,"th",19),t._uU(10,"\u0422\u043e\u0447\u043d\u043e\u0441\u0442\u044c"),t.qZA(),t.TgZ(11,"th",19),t._uU(12,"R"),t.qZA(),t.TgZ(13,"th",19),t._uU(14,"\u0421\u043b\u0435\u0434. \u0434\u0430\u0442\u0430"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,Gt,11,7,"tr",20),t.qZA()()()()),2&u){const n=t.oxw(2);t.xp6(16),t.Q6J("ngForOf",n.results)}}function Kt(u,e){if(1&u&&(t.TgZ(0,"div"),t.YNc(1,Qt,3,0,"div",1),t.YNc(2,Ht,17,1,"div",1),t.qZA()),2&u){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.isShowResults),t.xp6(1),t.Q6J("ngIf",n.isShowResults)}}E.\u0275fac=function(e){return new(e||E)},E.\u0275cmp=t.Xpm({type:E,selectors:[["study-study-test"]],viewQuery:function(e,n){if(1&e&&t.Gf(f,7),2&e){let s;t.iGM(s=t.CRH())&&(n.test=s.first)}},inputs:{studyTest:"studyTest"},outputs:{userAnswerEvent:"userAnswerEvent"},decls:9,vars:1,consts:[[1,"row","justify-content-center"],[1,"col-lg-6"],[1,"text-center"],["studyAnswerTest",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"p"),t._uU(4,"\u0412\u043e\u043f\u0440\u043e\u0441:"),t.qZA(),t.TgZ(5,"h4",2),t._uU(6),t.qZA()(),t._UZ(7,"hr"),t.YNc(8,Jt,0,0,"ng-template",3),t.qZA()()),2&e&&(t.xp6(6),t.Oqu(n.studyTest.question.content))},dependencies:[f]});class q{constructor(e,n){this.reviewService=e,this.studyService=n,this.curTestId=0,this.isShowChild=!1,this.isFinish=!1,this.isShowResults=!1,this.questionMap=new Map,this.testTypes=["SM2","WRITE"]}ngOnInit(){}ngOnDestroy(){this.reviewService.clear()}getStudyTests(){this.reviewService.getStudyTests().subscribe({next:e=>{this.curTest=this.reviewService.getTest(this.curTestId),this.isShowChild=!0},error:e=>{console.error(e)}})}endStudyTests(){this.reviewService.endStudyTests().subscribe({next:e=>{this.isFinish=!0,console.debug("Send!")},error:e=>{console.error(e)}})}addUserAnswer(e){console.debug(e),this.reviewService.addAnswer(e),this.isShowChild=!1,this.curTestId+1!=this.reviewService.getTestCount()?(this.curTestId+=1,this.curTest=this.reviewService.getNextTest(),console.debug(this.curTestId),setTimeout(()=>{this.isShowChild=!0},50)):this.endStudyTests()}onFinish(){this.endStudyTests()}showResults(){let e=[];for(let n of this.reviewService.answers)e.push(n.learningElementId);this.studyService.getStatsByIds(e).subscribe({next:n=>{this.results=n,this.isShowResults=!0,console.debug(n)},error:n=>{console.error(n)}})}getTargetLangContent(e){for(let n of e.sides)if(n.lang==this.reviewService.targetLang)return n.content}}q.\u0275fac=function(e){return new(e||q)(t.Y36(g),t.Y36(_))},q.\u0275cmp=t.Xpm({type:q,selectors:[["study-study-tests"]],decls:8,vars:4,consts:[[1,"mt-3"],[4,"ngIf"],["class","justify-content-between row",4,"ngIf"],[1,"row","my-2"],[1,"col"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"col-2"],[1,"form-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"ngValue"],[1,"justify-content-between","row"],[1,"col-auto"],[1,"btn","btn-success","col-auto","mx-2",3,"click"],[3,"studyTest","userAnswerEvent",4,"ngIf"],[3,"studyTest","userAnswerEvent"],[1,"btn","btn-info",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"\u0422\u0435\u0441\u0442\u044b"),t.qZA(),t.YNc(3,Bt,20,4,"div",1),t.YNc(4,kt,5,2,"div",2),t._UZ(5,"hr"),t.YNc(6,Yt,2,1,"div",1),t.YNc(7,Kt,3,2,"div",1),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",!n.curTest),t.xp6(1),t.Q6J("ngIf",!n.isFinish&&n.curTest),t.xp6(2),t.Q6J("ngIf",n.curTest),t.xp6(1),t.Q6J("ngIf",n.isFinish))},dependencies:[a.sg,a.O5,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.On,E]});const Wt=[{path:"",component:x,canActivate:[T],canActivateChild:[T],children:[{path:"",component:y},{path:"courses",component:A},{path:"course/:id",component:w},{path:"test",component:q},{path:"stats/ltopic/:lTopicId",component:U},{path:"stats/lelement/:lElementId",component:b}]}];class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275mod=t.oAB({type:v}),v.\u0275inj=t.cJS({imports:[d.Bz.forChild(Wt),d.Bz]});class C{}C.\u0275fac=function(e){return new(e||C)},C.\u0275mod=t.oAB({type:C}),C.\u0275inj=t.cJS({imports:[a.ez,v,p.IJ,c.u5,c.UX,D.JF]})}}]);